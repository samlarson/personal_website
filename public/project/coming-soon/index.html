<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta name="generator" content="Hugo 0.62.2" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Coming Soon | Sam Larson</title>

    
    <meta name="description" content="Detailed technical write-ups coming soon"> 
      
    
    
    

    

  <meta name="author" content="">


    <meta property="og:title" content="Coming Soon" />
<meta property="og:description" content="Detailed technical write-ups coming soon" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/project/coming-soon/" />
<meta property="article:published_time" content="2020-01-20T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-01-20T00:00:00+00:00" />

    





    
    
    

    
    
    <link rel="icon" type="image/png" href="/favicon_small.png"/>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> 
    <link rel="stylesheet" href="https://jenil.github.io/bulmaswatch/darkly/bulmaswatch.min.css"> 
    <link rel="stylesheet" href="/css/landing.css">   
    
    
</head>


<body>
    <header> <nav class="navbar is-transparent">
  <div class="navbar-brand">
    <a class="navbar-item" href="/">
      <img src="/favicon.ico" alt="home">
    </a>
    
    <a role="button" class="navbar-burger" data-target="navbar-menu" aria-label="menu" aria-expanded="false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
    </a>
  </div>

  <div class="navbar-menu" id="navbar-menu">
    <div class="navbar-start">
      
      <a class="navbar-item" target="blank" href="https://github.com/samlarson">
        <span class="icon">
          <i class="fa fa-github"></i>
        </span>
      </a>
      

      
      <a class="navbar-item" target="blank" href="https://linkedin.com/in/sam-larson-7337b218b">
        <span class="icon">
          <i class="fa fa-linkedin-square"></i>
        </span>
      </a>
      
    </div>

    
    
    

    
    
    <div class="navbar-end">
      <div class="navbar-item">
        
        
          <a itemprop="url" class="navbar-item " href="/about/"><span itemprop="name">about</span></a>
        
          <a itemprop="url" class="navbar-item " href="/posts/"><span itemprop="name">Posts</span></a>
        
          <a itemprop="url" class="navbar-item  is-active" href="/project/"><span itemprop="name">Projects</span></a>
        
      </div>
    </div>
  </div>
</nav>
 </header>
    <main>

<div class="columns is-fullheight">
    <div class="column">
        <section class="hero is-default is-bold">
            <div class="hero-body">
                <div class="content container">
                   <h1 id="coming-soon">Coming Soon</h1>
<blockquote>
<p>I'm currently in the process of categorizing and documenting my more recent projects that I've been working on. For now, here are some function excerpts from some of those endeavors as a sample:</p>
</blockquote>
<hr>
<p>AWS Parallelization: <code>parallelization</code>: Uses multiprocessing library to execute boto3 calls across accounts</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">parallelization</span>(data, function, service, resource, region, accnt_subset, env_set<span style="color:#f92672">=</span>False, dry_run<span style="color:#f92672">=</span>False):
    <span style="color:#66d9ef">if</span> len(data) <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span>:
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">ERROR:    Length of account IDs is 1. Please use this script for parallel actions across </span><span style="color:#e6db74">&#34;</span>
              <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">multiple accounts and confirm you are selecting a verified account list. Terminating...</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)
        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">ValueError</span>

    cores <span style="color:#f92672">=</span> multiprocessing<span style="color:#f92672">.</span>cpu_count()
    n_workers <span style="color:#f92672">=</span> cores <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>

    total <span style="color:#f92672">=</span> len(data)
    chunk_size <span style="color:#f92672">=</span> total <span style="color:#f92672">/</span> n_workers

    slices <span style="color:#f92672">=</span> serialization(data, chunk_size)
    jobs <span style="color:#f92672">=</span> []

    <span style="color:#66d9ef">for</span> i, s <span style="color:#f92672">in</span> enumerate(slices):
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">i: </span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">+</span> str(i) <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74"> s: </span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">+</span> str(s) <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">  ---------------------------------------------------------------</span><span style="color:#e6db74">&#34;</span>
                                                   <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">-----------------------------------------------------------------</span><span style="color:#e6db74">&#34;</span>)
        j <span style="color:#f92672">=</span> multiprocessing<span style="color:#f92672">.</span>Process(target<span style="color:#f92672">=</span>do_work(i<span style="color:#f92672">=</span>i, s<span style="color:#f92672">=</span>s, function<span style="color:#f92672">=</span>function, service<span style="color:#f92672">=</span>service, resource<span style="color:#f92672">=</span>resource,
                                                   region<span style="color:#f92672">=</span>region, accnt_subset<span style="color:#f92672">=</span>accnt_subset, env_set<span style="color:#f92672">=</span>env_set,
                                                   dry_run<span style="color:#f92672">=</span>dry_run),
                                    args<span style="color:#f92672">=</span>(i, s))
        jobs<span style="color:#f92672">.</span>append(j)

    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> jobs:
        j<span style="color:#f92672">.</span>start()

    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Multiprocessing Completed</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><hr>
<p>Man-O-War: <code>deploy_stressor</code>: Used in a Pod Executioner playbook as a stress-ng injector</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">deploy_stressor</span>(self, host_ip, container_list, signal_type<span style="color:#f92672">=</span><span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">simple</span><span style="color:#e6db74">&#34;</span>, dry_run<span style="color:#f92672">=</span>False):
    util <span style="color:#f92672">=</span> Utility()
    rng <span style="color:#f92672">=</span> random<span style="color:#f92672">.</span>randint(<span style="color:#ae81ff">0</span>, len(container_list) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
    container_id <span style="color:#f92672">=</span> container_list[rng]
    docker_shell <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">docker container exec --privileged -it </span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">+</span> container_id <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74"> /bin/sh</span><span style="color:#e6db74">&#34;</span>

    apk_stress_1 <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">wget https://kernel.ubuntu.com/~cking/tarballs/stress-ng/stress-ng-0.10.02.tar.xz &amp;&amp; </span><span style="color:#e6db74">&#34;</span>
    apk_stress_2 <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">tar xf stress-ng-0.10.02.tar.xz &amp;&amp; </span><span style="color:#e6db74">&#34;</span>
    apk_stress_3 <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">cd stress-ng-0.10.02 &amp;&amp; </span><span style="color:#e6db74">&#34;</span>
    apk_stress_4 <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">make clean &amp;&amp; STATIC=1 make</span><span style="color:#e6db74">&#34;</span>

    apk_stress <span style="color:#f92672">=</span> apk_stress_1 <span style="color:#f92672">+</span> apk_stress_2 <span style="color:#f92672">+</span> apk_stress_3 <span style="color:#f92672">+</span> apk_stress_4
    apt_stress <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">apt-get update &amp;&amp; apt-get install stress-ng</span><span style="color:#e6db74">&#34;</span>
    stress_ng <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">stress-ng --cpu 4 --timeout 30s</span><span style="color:#e6db74">&#34;</span>

    <span style="color:#66d9ef">if</span> dry_run:
        logging<span style="color:#f92672">.</span>info(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">DRYRUN    Adding Stressor to Container: </span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">+</span> container_id)
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>

    <span style="color:#66d9ef">elif</span> signal_type <span style="color:#f92672">==</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">simple</span><span style="color:#e6db74">&#34;</span>:
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Searching for vector to add Stressor to container: </span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">+</span> container_id <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>)
        
        <span style="color:#66d9ef">try</span>:
            util<span style="color:#f92672">.</span>exec_sh(host_ip<span style="color:#f92672">=</span>host_ip, command<span style="color:#f92672">=</span>stress_ng)
            time<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">10</span>)
        <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
            <span style="color:#66d9ef">print</span>(e)
            logging<span style="color:#f92672">.</span>warning(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Exception while stressing containers. Attempting alternative stress injection...</span><span style="color:#e6db74">&#34;</span>)

        <span style="color:#66d9ef">try</span>:
            util<span style="color:#f92672">.</span>exec_sh(host_ip<span style="color:#f92672">=</span>host_ip, command<span style="color:#f92672">=</span>docker_shell)
            util<span style="color:#f92672">.</span>exec_sh(host_ip<span style="color:#f92672">=</span>host_ip, command<span style="color:#f92672">=</span>apt_stress)
            util<span style="color:#f92672">.</span>exec_sh(host_ip<span style="color:#f92672">=</span>host_ip, command<span style="color:#f92672">=</span>stress_ng)
            time<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">2</span>)
        <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
            <span style="color:#66d9ef">print</span>(e)
            logging<span style="color:#f92672">.</span>warning(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Exception while stressing containers. Attempting alternative stress injection...</span><span style="color:#e6db74">&#34;</span>)

        <span style="color:#66d9ef">try</span>:
            util<span style="color:#f92672">.</span>exec_sh(host_ip<span style="color:#f92672">=</span>host_ip, command<span style="color:#f92672">=</span>docker_shell)
            util<span style="color:#f92672">.</span>exec_sh(host_ip<span style="color:#f92672">=</span>host_ip, command<span style="color:#f92672">=</span>apk_stress)
            util<span style="color:#f92672">.</span>exec_sh(host_ip<span style="color:#f92672">=</span>host_ip, command<span style="color:#f92672">=</span>stress_ng)
            time<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">2</span>)
        <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
            <span style="color:#66d9ef">print</span>(e)
            logging<span style="color:#f92672">.</span>warning(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Exception while stressing containers. Attempting alternative stress injection...</span><span style="color:#e6db74">&#34;</span>)

    <span style="color:#66d9ef">elif</span> signal_type <span style="color:#f92672">==</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">random</span><span style="color:#e6db74">&#34;</span>:
        random_stressor()
</code></pre></div><!-- raw HTML omitted -->
<!-- raw HTML omitted -->

                </div>
                <br>
            </div>
        </section>
    </div>
</div>
</main>
    <footer> 
  <footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <p>
                This page is generated with
                <a href="https://gohugo.io/">Hugo</a>.
                
                Copyright
                  <strong>Samuel Larson</strong>
                
                 2020 all rights reserved. To reach out directly, email me at sam@slars.dev
            </p>
        </div>
    </div>
</footer>
 
</footer>

    <script async type="text/javascript" src="/js/bulma.js"></script>
    <script async type="text/javascript"  src="/js/clipboard.min.js"></script>
    <script async type="text/javascript"  src="/js/clip.js"></script>
</body>

</html>
